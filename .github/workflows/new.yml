name: Publish and Move Power BI Report

on:
  workflow_dispatch:  # Allows manual triggering of the workflow
  push:
    paths:
      - "uploaded_files/*.pbix"  # Trigger on changes to files in uploaded_files directory

permissions:
  contents: write  # Give the workflow write permissions for pushing commits

jobs:
  publish:
    runs-on: ubuntu-latest

    outputs:
      pbix_file_path: ${{ steps.detect_file.outputs.pbix_file_path }}

    steps:
      - name: Checkout Repository
        uses: actions/checkout@v3

      - name: Set up Python
        uses: actions/setup-python@v4
        with:
          python-version: '3.x'

      - name: Install Dependencies
        run: |
          pip install requests
          pip install python-dotenv

      - name: Detect .pbix File
        id
